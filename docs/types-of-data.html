<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistical Methods for Criminology - 2&nbsp; Types of criminological data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./general-linear-model.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./types-of-data.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Types of criminological data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistical Methods for Criminology</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./types-of-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Types of criminological data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./general-linear-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The general linear model</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./selection-measurement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Selection effects, bias and so on</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ethics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#who-cares-about-data-provenance" id="toc-who-cares-about-data-provenance" class="nav-link active" data-scroll-target="#who-cares-about-data-provenance"><span class="header-section-number">2.1</span> Who cares about data provenance?</a></li>
  <li><a href="#generative-stories-for-common-types-of-crime-data" id="toc-generative-stories-for-common-types-of-crime-data" class="nav-link" data-scroll-target="#generative-stories-for-common-types-of-crime-data"><span class="header-section-number">2.2</span> Generative stories for common types of crime data</a>
  <ul class="collapse">
  <li><a href="#how-does-an-event-become-a-crime-statistic" id="toc-how-does-an-event-become-a-crime-statistic" class="nav-link" data-scroll-target="#how-does-an-event-become-a-crime-statistic"><span class="header-section-number">2.2.1</span> How does an event become a crime statistic?</a></li>
  <li><a href="#how-does-an-incident-end-up-as-a-court-record" id="toc-how-does-an-incident-end-up-as-a-court-record" class="nav-link" data-scroll-target="#how-does-an-incident-end-up-as-a-court-record"><span class="header-section-number">2.2.2</span> How does an incident end up as a court record?</a></li>
  <li><a href="#how-does-an-incident-get-logged-as-a-police-stop" id="toc-how-does-an-incident-get-logged-as-a-police-stop" class="nav-link" data-scroll-target="#how-does-an-incident-get-logged-as-a-police-stop"><span class="header-section-number">2.2.3</span> How does an incident get logged as a police stop?</a></li>
  <li><a href="#cvi-data" id="toc-cvi-data" class="nav-link" data-scroll-target="#cvi-data"><span class="header-section-number">2.2.4</span> CVI data?</a></li>
  </ul></li>
  <li><a href="#key-dilemma" id="toc-key-dilemma" class="nav-link" data-scroll-target="#key-dilemma"><span class="header-section-number">2.3</span> Key dilemma</a></li>
  <li><a href="#survey-data" id="toc-survey-data" class="nav-link" data-scroll-target="#survey-data"><span class="header-section-number">2.4</span> Survey data</a></li>
  <li><a href="#victimization-surveys" id="toc-victimization-surveys" class="nav-link" data-scroll-target="#victimization-surveys"><span class="header-section-number">2.5</span> Victimization surveys</a></li>
  <li><a href="#how-does-a-person-get-selected-for-the-scjs" id="toc-how-does-a-person-get-selected-for-the-scjs" class="nav-link" data-scroll-target="#how-does-a-person-get-selected-for-the-scjs"><span class="header-section-number">2.6</span> How does a person get selected for the SCJS?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Types of criminological data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Criminological data - as with criminology itself - is extremely varied. The main types we will focus on in this workshop are self-reported victimization data, and police recorded crime data. Other forms of crime data include other administrative data, such convictions data, arrest data, data on police disposals (such as stop and search), and survey data which may cover things like self-reported offending, or confidence in police. Criminologists may also want to analyse social media data or data scraped from the web. Each of these data sources needs thinking about carefully, and may need different types of analysis depending on things like potential sources of bias or measurement error.</p>
<p><em>I guess key point is that you need to know how your data came about to be able to analyse it properly?</em></p>
<section id="who-cares-about-data-provenance" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="who-cares-about-data-provenance"><span class="header-section-number">2.1</span> Who cares about data provenance?</h2>
<p>To conduct a useful analysis - the kind that might help you understand the real world - you need to understand how your data came about. As we’ll see, whether you are analysing a survey or police recorded crime data or convictions data or something else matters in how you conduct your analysis and interpret the results. You need to know the ‘generative story’<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> about your data to analyse it properly.</p>
<p>When working with criminological data we often know quite a lot about how the data (or if you like, the numbers in the spreadsheet in front of you) came to exist. Using this information - information that might be in metadata, or based on our theoretical knowledge of the world - can help us do better data analysis.</p>
<p>How exactly we incorporate this information will depend a lot on what data we’re working with and what the goals of our analysis are. There are no general solutions to what information we should incorporate and how we might do this, but in this workshop we’ll cover some scenarios that can arise in criminological research.</p>
</section>
<section id="generative-stories-for-common-types-of-crime-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="generative-stories-for-common-types-of-crime-data"><span class="header-section-number">2.2</span> Generative stories for common types of crime data</h2>
<section id="how-does-an-event-become-a-crime-statistic" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="how-does-an-event-become-a-crime-statistic"><span class="header-section-number">2.2.1</span> How does an event become a crime statistic?</h3>
<p>[add link to SG flow diagram]</p>
</section>
<section id="how-does-an-incident-end-up-as-a-court-record" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="how-does-an-incident-end-up-as-a-court-record"><span class="header-section-number">2.2.2</span> How does an incident end up as a court record?</h3>
<p>Crime​</p>
<p>Arrest and charge​</p>
<p>Court​</p>
<p>Sentencing​</p>
</section>
<section id="how-does-an-incident-get-logged-as-a-police-stop" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="how-does-an-incident-get-logged-as-a-police-stop"><span class="header-section-number">2.2.3</span> How does an incident get logged as a police stop?</h3>
<p><span class="citation" data-cites="knoxAdministrativeRecordsMask2020a">(<a href="references.html#ref-knoxAdministrativeRecordsMask2020a" role="doc-biblioref">Knox, Lowe, and Mummolo 2020</a>)</span></p>
<ul>
<li>Observation</li>
<li>Encouter</li>
<li>Stop</li>
</ul>
</section>
<section id="cvi-data" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="cvi-data"><span class="header-section-number">2.2.4</span> CVI data?</h3>
<p>https://www.scotland.police.uk/about-us/covid-19-police-scotland-response/enforcement-and-response-data/</p>
</section>
</section>
<section id="key-dilemma" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="key-dilemma"><span class="header-section-number">2.3</span> Key dilemma</h2>
<p>Do official crime statistics reflect ‘behavioural’ trends in crime, or just the actions of the justice system?​(Kitsuse and Cicourel, 1963)</p>
<p>How you see this may depend on your theoretical persuasion <span class="citation" data-cites="simesPolicingPunishmentPlace2023">(<a href="references.html#ref-simesPolicingPunishmentPlace2023" role="doc-biblioref">Simes, Beck, and Eason 2023</a>)</span></p>
<p>Sometimes this is less of a dilemma when you have a comparable victim survey and you are interested in overall levels of crime <span class="citation" data-cites="buil-gilComparingMeasurementsViolent2022">(<a href="references.html#ref-buil-gilComparingMeasurementsViolent2022" role="doc-biblioref">Buil-Gil et al. 2022</a>)</span>. However, this is a challenge “outside consolidated western democracies where the range of available data is often limited” <span class="citation" data-cites="atakWesternCrimeDrop2020">(<a href="references.html#ref-atakWesternCrimeDrop2020" role="doc-biblioref">Atak 2020</a>)</span></p>
</section>
<section id="survey-data" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="survey-data"><span class="header-section-number">2.4</span> Survey data</h2>
<p>Mostly specialist secondary survey​</p>
<p>Scottish Crime and Justice Survey​</p>
<p>Crime Survey for England and Wales​</p>
<p>Equivalents in other countries, primarily in Western Europe, North America and Australasia ​</p>
<p>Smaller geographical scale surveys such as The Mayor’s Office for Policing And Crime (MOPAC) Survey in London</p>
</section>
<section id="victimization-surveys" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="victimization-surveys"><span class="header-section-number">2.5</span> Victimization surveys</h2>
<p>Typically ask people about their experiences of victimization in the last year​</p>
<p>Can measure crime that isn’t reported to the police​</p>
<p>Usually don’t ask about people’s offending behaviour​</p>
<p>Good for measuring common crimes, bad for measuring rare crimes</p>
</section>
<section id="how-does-a-person-get-selected-for-the-scjs" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="how-does-a-person-get-selected-for-the-scjs"><span class="header-section-number">2.6</span> How does a person get selected for the SCJS?</h2>
<p>Random sample of 10,000 postcodes in Scotland are contacted to take part​</p>
<p>For those who agree, one adult (age 16 or over) in each household is randomly selected for interview​</p>
<p>Therefore, <em>by design</em> no:​</p>
<p>Children​</p>
<p>Homeless people​</p>
<p>People living in communal establishments</p>
<p>“Moreover, in practice, household surveys typically under-represent: those in fragile, disjointed households; slum populations and areas posing security risks.” <span class="citation" data-cites="carr-hillMissingMillionsMeasuring2013">(<a href="references.html#ref-carr-hillMissingMillionsMeasuring2013" role="doc-biblioref">Carr-Hill 2013</a>)</span></p>
<p>(Not going to talk about things like measurment equivalence in internaitonal surveys although that is a thing!)</p>
<p>Standardization of surveys means it’s hard to reflect new forms of crime in established surveys – see cyber/enabled crime in CSEW​</p>
<p>Regular changes to question wording means that time series analysis is compromised which is why only a small number of fraud and cyber questions were added to the CSEW​</p>
<p>This means that the new questions are only a limited measure of ‘cybercrime’</p>
<section id="who-is-excluded" class="level4" data-number="2.6.0.1">
<h4 data-number="2.6.0.1" class="anchored" data-anchor-id="who-is-excluded"><span class="header-section-number">2.6.0.1</span> Who is excluded?</h4>
<p>For SCJS to be a measure of crime for all adults, not just all adults in private households, we need to make a key assumption that “the subset of the adult population not captured in the SCJS experience the same level of victimisation as adults in the household resident population”​</p>
<p>But this excludes people, students, people in prison, and those living in refuges​</p>
<p>“Domestic abuse is the main cause of women’s homelessness in Scotland… All women living in Women’s Aid refuges have experienced domestic abuse and many will have experienced other forms of crime”</p>
<p><span class="citation" data-cites="scottishwomensaidResponseConsultationScottish2021">(<a href="references.html#ref-scottishwomensaidResponseConsultationScottish2021" role="doc-biblioref">Scottish Women’s Aid 2021</a>)</span></p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-atakWesternCrimeDrop2020" class="csl-entry" role="listitem">
Atak, Kıvanç. 2020. <span>“Beyond the Western Crime Drop: <span>Violence</span>, Property Offences, and the State in <span>Turkey</span> 1990–2016.”</span> <em>International Journal of Law, Crime and Justice</em> 60 (March): 100373. <a href="https://doi.org/10.1016/j.ijlcj.2019.100373">https://doi.org/10.1016/j.ijlcj.2019.100373</a>.
</div>
<div id="ref-buil-gilComparingMeasurementsViolent2022" class="csl-entry" role="listitem">
Buil-Gil, David, Ian Brunton-Smith, Jose Pina-Sánchez, and Alexandru Cernat. 2022. <span>“Comparing Measurements of Violent Crime in Local Communities: A Case Study in <span>Islington</span>, <span>London</span>.”</span> <em>Police Practice and Research</em> 23 (4): 489–506. <a href="https://doi.org/10.1080/15614263.2022.2047047">https://doi.org/10.1080/15614263.2022.2047047</a>.
</div>
<div id="ref-carr-hillMissingMillionsMeasuring2013" class="csl-entry" role="listitem">
Carr-Hill, Roy. 2013. <span>“Missing <span>Millions</span> and <span>Measuring Development Progress</span>.”</span> <em>World Development</em> 46 (June): 30–44. <a href="https://doi.org/10.1016/j.worlddev.2012.12.017">https://doi.org/10.1016/j.worlddev.2012.12.017</a>.
</div>
<div id="ref-knoxAdministrativeRecordsMask2020a" class="csl-entry" role="listitem">
Knox, Dean, Will Lowe, and Jonathan Mummolo. 2020. <span>“Administrative <span>Records Mask Racially Biased Policing</span>.”</span> <em>American Political Science Review</em> 114 (3): 619–37. <a href="https://doi.org/10.1017/S0003055420000039">https://doi.org/10.1017/S0003055420000039</a>.
</div>
<div id="ref-sankaranGenerativeModelsInterdisciplinary2023" class="csl-entry" role="listitem">
Sankaran, Kris, and Susan P. Holmes. 2023. <span>“Generative <span>Models</span>: <span>An Interdisciplinary Perspective</span>.”</span> <em>Annual Review of Statistics and Its Application</em> 10 (Volume 10, 2023): 325–52. <a href="https://doi.org/10.1146/annurev-statistics-033121-110134">https://doi.org/10.1146/annurev-statistics-033121-110134</a>.
</div>
<div id="ref-scottishwomensaidResponseConsultationScottish2021" class="csl-entry" role="listitem">
Scottish Women’s Aid. 2021. <span>“Response to the Consultation on the <span>Scottish Crime</span> and <span>Justice Survey</span> (<span>SCJS</span>), <span>December</span> 2021.”</span> https://womensaid.scot/wp-content/uploads/2022/04/SWA-response-to-Scottish-Crime-and-Justice-Survey-consultation.pdf.
</div>
<div id="ref-simesPolicingPunishmentPlace2023" class="csl-entry" role="listitem">
Simes, Jessica T., Brenden Beck, and John M. Eason. 2023. <span>“Policing, <span>Punishment</span>, and <span>Place</span>: <span>Spatial-Contextual Analyses</span> of the <span>Criminal Legal System</span>.”</span> <em>Annual Review of Sociology</em> 49 (1): 221–40. <a href="https://doi.org/10.1146/annurev-soc-031021-035328">https://doi.org/10.1146/annurev-soc-031021-035328</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>‘Generative modelling’ is - depressingly - a term that means different things to different audiences <span class="citation" data-cites="sankaranGenerativeModelsInterdisciplinary2023">(<a href="references.html#ref-sankaranGenerativeModelsInterdisciplinary2023" role="doc-biblioref">Sankaran and Holmes 2023</a>)</span>. Michael Betancourt talks about ‘narratively generative’ models <span class="citation" data-cites="betancourtWhatProbabilisticStory">(<a href="references.html#ref-betancourtWhatProbabilisticStory" role="doc-biblioref"><strong>betancourtWhatProbabilisticStory?</strong></a>)</span>, which is a terminology I quite like - we can tell a story about how the data came to be and this can influence the model/s we fit.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./general-linear-model.html" class="pagination-link" aria-label="The general linear model">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The general linear model</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>